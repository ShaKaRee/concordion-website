{% assign spec_type=page.spec_type %}
{% if spec_type == 'html' %}
{% assign html=true %}
{% assign md=false  %}
{% assign spec_type_desc = 'HTML' %}
{% assign ext='html' %}
{% elsif spec_type == 'markdown' %}
{% assign html=false %}
{% assign md=true    %}
{% assign spec_type_desc = 'Markdown' %}
{% assign ext='md'    %}
{% endif %}

{% assign fixture_language=page.fixture_language %}
{% if fixture_language == 'java' %}
{% assign java=true %}
{% assign csharp=false  %}
{% assign fixture_language_desc = 'Java' %}
{% elsif fixture_language == 'csharp' %}
{% assign java=false %}
{% assign csharp=true %}
{% assign fixture_language_desc = 'C#' %}
{% endif %}

_This page shows the integrations for __{{ fixture_language_desc }}__._  Click the toggle buttons above to choose other options.

{% if java %}
<div class="row">
    <h1 class="header">IDEs</h1>

    <div class="section">
        <h2 class="header">IntelliJ IDEA</h2>
        <p>The excellent <a href="https://plugins.jetbrains.com/plugin/7978?pr=idea">Concordion support</a> plugin for IDEA provides support such as autocompletion, 2-way navigation between specifications and fixtures, run test from specification, surround with Concordion command, go to declaration and renaming.</p>
        <p>This plugin supports both HTML and Markdown format specifications.</p>
    </div>

    <div class="divider"></div>

    <div class="section">
        <h2 class="header">Eclipse</h2>
        <p>The <a href="https://code.google.com/archive/p/concordion-eclipse/">concordion-eclipse</a> plugin provides content assist and validation for Concordion specifications, integrated into Eclipse's HTML and Web Page (Source) editors.</p>
        <p>This plugin currently supports HTML format specifications (not Markdown). It has not been updated with the Concordion 2.0 commands yet, so will show these as errors, but still works well.</p>
    </div>
</div>

<div class="row">
    <h1 class="header">Build tools</h1>

    <div class="section">
        <h2 class="header">Gradle</h2>
        <p>Concordion tests can be run using the standard test task. A typical build script is:
            {% highlight groovy %}
            apply plugin: 'java'

            repositories {
            mavenCentral()
            }

            dependencies {
            testCompile "org.concordion:concordion:x.y.z"
            }

            test {
            testLogging.showStandardStreams = true   // display test output on console
            systemProperties['concordion.output.dir'] = "$reporting.baseDir/spec"  // write output to build/reports/spec
            outputs.upToDateWhen { false }   // force tests to run even if code hasn't changed
            }
            {% endhighlight %}                    
        <p>, where <i>x.y.z</i> is replaced by the Concordion version, for example 2.0.0.</p>

        <p>If you have created a suite of specifications using the run command, you should run only your main fixture class by adding this line inside the `test` block:

            {% highlight groovy %}
            include '**/_MainFixture.*_' 
            {% endhighlight %}                    

        <p>, where <i>MainFixture.java</i> is the fixture class corresponding to the main index page.</p>

    </div>

    <div class="divider"></div>

    <div class="section">
        <h2 class="header">Maven</h2>
        <p>Concordion tests can be run using the surefire plugin. For example:
            {% highlight xml %}
            <build>
                <plugins>
                    ......
                    <plugin>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <version>2.19.1</version>
                        <configuration>
                            <systemPropertyVariables>
                                <property>
                                    <name>concordion.output.dir</name>
                                    <value>target/concordion</value>
                                </property>
                            </systemPropertyVariables>
                        </configuration>
                    </plugin>
                    ......
                </plugins>
            </build>
            {% endhighlight %}                    

        <p>If you have created a suite of specifications using the run command, you should run only your main fixture class by adding these lines inside the `configuration` element:

            {% highlight xml %}
            <includes>
                <include>**/MainFixture.java</include>
            </includes>
            {% endhighlight %}                    

        <p>, where <i>MainFixture.java</i> is the fixture class corresponding to the main index page.</p>

        <p>There is also a <a href="https://github.com/bassman5/maven-concordion-reporting-plugin">maven-concordion-reporting-plugin</a> which allows you to incorporate concordion reports into a maven site report in the project reports section.</p>
    </div>
</div>


<div class="row">
    <h1 class="header">Build servers</h1>

    <div class="section">
        <h2 class="header">Jenkins</h2>

        <p>
            The <a class="externalLink" href="https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin">HTML Publisher plugin</a> can publish the Concordion results, maintain a per-build history, and let you download the output as a zip file.
        </p>
        <p><b>NOTE:</b> as of Jenkins 1.641 / 1.625.3, the new <a href="https://wiki.jenkins-ci.org/display/JENKINS/Configuring+Content+Security+Policy">Content Security Policy</a> results in Concordion reports being no longer viewable in Jenkins, with the error <code>"Refused to apply inline style because it violates the following Content Security Policy directive: "style-src 'self'"</code>. Concordion reports use inline CSS and Javascript.
        </p>
        <p>While we investigate the issue further, the only workaround is to restore the security vulnerability. To do this, relax the policy to allow <code>script-src 'unsafe-inline'</code> and <code>style-src 'unsafe-inline'</code> by appending <code>-Dhudson.model.DirectoryBrowserSupport.CSP=\" sandbox; default-src 'none'; img-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; script-src 'unsafe-inline';\"</code> to the value of the JAVA_ARGS variable in the Jenkins startup script (/etc/default/jenkins on Linux) and restarting Jenkins. Note that we are still investigating this further - see the <a class="externalLink" href="https://groups.google.com/d/msg/concordion/RSp92D2CNuc/nwYW4yqvEQAJ">discussion</a>.</p>
    </div>
</div>

{% elsif csharp %}

<div class="row">
    <h1 class="header">Test Runners</h1>

    <div class="section">
        <h2 class="header">Standalone NUnit Runners</h2>
        <p>
            NUnit provides <a href="http://nunit.org/index.php?p=runningTests&r=2.6.4">
            different runners</a>, which can be used to run your Concordion.NET tests.
        </p>

        <h3>Run Concordion.NET tests with the NUnit GUI runner</h3>
        <ol>
            <li>
                <a href="{{site.baseurl}}/download/{{ page.fixture_language }}/{{ page.spec_type }}">Download Concordion.NET</a>.
            </li>
            <li>
                Download and <a class="externalLink" href="http://www.nunit.org/index.php?p=installation&r=2.6.4">install NUnit version 2.6.4</a>.
            </li>
            <li>
                Copy the Concordion.NUnit.dll from the tools directory of your Concordion.NET package into the addin directory of your NUnit installation (&lt;NUnit-installation-path&gt;\bin\addins). 
                <br/>
                When updating Concordion.NET, make sure you update this DLL .
            </li>
            <li>
                Load your tests with the NUnit GUI runner.
                <br/>
                Tip: You can open your Visual Studio solutions and/or projects in NUnit, when you activate the <a class="externalLink" href="http://nunit.org/index.php?p=settingsDialog&r=2.6.4">IDE Support Settings - Visual Studio</a>.
            </li>
            <li>
                Select the Concordion.NET test you want to run in the tree view and press the Run button.
            </li>
        </ol>
        <p>
            The GUI Runner will show the test results, for example:
        </p>
        <p>
            <img alt="Display of test results" src="{{ site.baseurl }}/img/integration-nunit-result.jpg" />
        </p>
        <p>
            The Concordion output specifications can be found in the temp directory (on Windows defined by the environment variable %Temp%, which by default points to C:\Users\&lt;your-windows-user&gt;\AppData\Local\Temp). The output directory can also be <a href="{{site.baseurl}}/coding/{{ page.fixture_language }}/{{ page.spec_type }}#configuration-options">configured</a> to use a different directory. 
        </p>

        <h3>Run Concordion.NET tests with the console runner</h3>
        <p>
            NUnit provides a <a class="externalLink" href="http://nunit.org/index.php?p=nunit-console&r=2.6.4"> command line client</a> for test execution, which can be useful for the automation of test execution and integration into other systems (e.g. build systems). You can run your Concordion.NET tests with the NUnit console runner as follows:
        </p>
        <ol>
            <li>
                <a href="{{site.baseurl}}/download/{{ page.fixture_language }}/{{ page.spec_type }}">Download Concordion.NET</a>.
            </li>
            <li>
                Download and <a class="externalLink" href="http://www.nunit.org/index.php?p=installation&r=2.6.4">install NUnit version 2.6.4</a>.
            </li>
            <li>
                Copy the Concordion.NUnit.dll from the tools directory of your Concordion.NET package into the addin directory of your NUnit installation (&lt;NUnit-installation-path&gt;\bin\addins). 
                <br/>
                When updating Concordion.NET, make sure you update this DLL .
            </li>
            <li>
                In the command line window, <a class="externalLink" href="http://nunit.org/index.php?p=nunit-console&r=2.6.4">run the nunit-console application</a> and pass in the DLL containing your Concordion.NET specifications and tests.
            </li>
        </ol>

        <h3>Debugging Concordion.NET tests</h3>
        <p>
            If you want to debug your Concordion.NET tests, you can do this in the same way as <a class="externalLink" href="http://erraticdev.blogspot.co.at/2012/01/running-or-debugging-nunit-tests-from.html">debugging NUnit tests</a>.
        </p>
    </div>

    <div class="divider"></div>

    <div class="section">
        <h2 id="visual-studio">Using NUnit test runners integrated in Visual Studio</h2>
        <p>
            There are several ways to run Concordion.NET automated tests within Visual Studio (e.g. TestDriven.NET, ReSharper, Test Adapter, etc.).
        </p>

        <h3 id="testdriven.net">TestDriven.NET</h3>
        <p>
            You can use <a class="externalLink" href="http://testdriven.net">TestDriven.NET</a> to execute Concordion.NET tests within Visual Studio.
        </p>
        <ol>
            <li>
                <a href="{{site.baseurl}}/download/{{ page.fixture_language }}/{{ page.spec_type }}">Download Concordion.NET</a>.
            </li>
            <li>
                Install TestDriven.NET
            </li>
            <li>
                Copy Concordion.NUnit.dll from the tools directory of your Concordion.NET package into the addin directory of the latest NUnit version in the installation directory of TestDriven.NET (&lt;testdriven.net-installation-path&gt;\NUnit\2.6\addins)
            </li>
            <li>
                To run a test, use the &quot;Run Test(s)&quot; command of TestDriven.NET on your Concordion.NET fixture class (<a href="http://testdriven.net/quickstart.aspx">http://testdriven.net/quickstart.aspx</a>).
            </li>
        </ol>
        <p>
            When you run Concordion.NET tests with TestDriven.NET in Visual Studio, you should see an output similar to:
        </p>
        <pre class="console">
------ Test started: Assembly: Kickstart.Spec.dll ------ <br/>
Processed specifications : C:\concordion-test\Kickstart\Spec\HelloWorld\HelloWorld.html<br/>
1 passed, 0 failed, 0 skipped, took 0,82 seconds (NUnit 2.6.4).
        </pre>

        <h3 id="test-adapter">NUnit Test Adapter</h3>
        <p>
            Since version 2012, Visual Studio supports <a class="externalLink" href="http://blogs.msdn.com/b/visualstudioalm/archive/2012/03/08/what-s-new-in-visual-studio-11-beta-unit-testing.aspx"> 3rd party test runners</a> to execute their tests right inside Visual Studio. This allows the NUnit Test Adapter for Visual Studio to run Concordion.NET tests.
        </p>
        <p>
            Please note that at the time of writing an <a class="externalLink" href="https://github.com/nunit/nunit-vs-adapter/issues/9">issue of the NUnit Test Adapter</a> prevents the execution of Concordion.NET tests based on the NUnit addin. Until the issue is fixed by the NUnit team, you will need to adapt your fixture to extend `ExecutableSpecification` as follows:
        </p>

        <pre class="csharp">
<b>using Concordion.Runners.NUnit;
using NUnit.Framework;</b>

namespace Kickstart.Spec.HelloWorld
{
    <b>[TestFixture]</b>
    public class HelloWorldTest <b>: ExecutableSpecification</b>
...
        </pre>

        <p>
            When you want to use the Test Runner, make sure to remove the [assembly: RequiredAddin("ConcordionNUnitAddin&quot;)] from the projects AssemblyInfo.cs. Otherwise the issue in the NUnit Test Adapter prevents your Concordion.NET tests being found by the NUnit Test Adapter.
        </p>

        To run Concordion.NET acceptance tests without the need for addins, you have to derive your test fixtures from the Concordion.Runners.NUnit.ExecutableSpecification class and annotate it with the standard NUnit [TestFixture] annotation.

        <h3 id="resharper">Resharper</h3>
        <p>
            You can run Concordion.NET acceptance tests within Visual Studio with <a href="https://www.jetbrains.com/resharper/">ReSharper</a>:
        </p>
        <ol>
            <li>
                <a href="{{site.baseurl}}/download/{{ page.fixture_language }}/{{ page.spec_type }}">Download Concordion.NET</a>.
            </li>
            <li>
                Install ReSharper
            </li>
            <li>
                Copy Concordion.NUnit.dll from the tools directory of the Concordion.NET package into the addin directory of your ReSharper installation (&lt;resharper-installation-path&gt;\Bin\addins\)
                <ul>
                    <li>
                        Using specific NUnit installation: If you aren't using the build-in NUnit, but your specified NUnit installation (ReSharper -&gt; Options ... -&gt; Tools -&gt; Unit Testing -&gt; NUnit), you have to copy Concordion.NUnit.dll into the used NUnit installation (&lt;nunit-installation-path&gt;\bin\addins\).
                    </li>
                    <li>
                        Make sure you use NUnit version 2.6.4 in any setup.
                    </li>
                </ul>
            </li>
            <li>
                Run your Concordion.NET acceptance tests with ReSharper
                <ol>
                    <li>
                        To run a single test directly from the editor: Click on the ReSharper testing icon next to the line of your fixture class definition and select the Run or Debug option in the context menu.
                    </li>
                    <li>
                        To run multiple tests: Right click on the element containing the tests of interest in the Solution Explorer and select either the Run Unit Tests or Debug Unit Tests option in the context menu.
                    </li>
                </ol>
            </li>
        </ol>
        <p>
            When running the automated tests with ReSharper you can see the progress and results in the Unit Test Sessions window:
        </p>
        <img alt="ReSharper Unit Test Session" src="{{ site.baseurl }}/img/integration-resharper-test-session.jpg">
    </div>
</div>
{% endif %}